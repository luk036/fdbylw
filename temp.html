<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <meta name="author" content="陆伟成" />
  <meta name="dcterms.date" content="2018-03-18" />
  <title>如何用 Markdown + Pandoc 写毕业论文</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; position: absolute; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; }
pre.numberSource a.sourceLine:empty
  { position: absolute; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: absolute; left: -5em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<header>
<h1 class="title">如何用 Markdown + Pandoc 写毕业论文</h1>
<p class="author">陆伟成</p>
<p class="date">2018-03-18</p>
</header>
<nav id="TOC">
<ul>
<li><a href="#sec:摘要">摘要</a></li>
<li><a href="#sec:abstract">Abstract</a></li>
<li><a href="#sec:sec1">第一章 绪论</a><ul>
<li><a href="#sec:pandoc">§1.1 <code>pandoc</code></a></li>
<li><a href="#sec:pandoc-crossref-filter">§1.2 <code>pandoc-crossref</code> filter</a></li>
<li><a href="#sec:pandoc---reference-doc">§1.3 <code>pandoc --reference-doc</code></a></li>
</ul></li>
<li><a href="#sec:sec2">第二章 List Items</a></li>
<li><a href="#sec:sec3">第三章 图、表、公式</a><ul>
<li><a href="#sec:图">§3.1 图</a></li>
<li><a href="#sec:表">§3.2 表</a></li>
<li><a href="#sec:公式">§3.3 公式</a></li>
</ul></li>
<li><a href="#sec:第四章-code-blocks">第四章 Code blocks</a><ul>
<li><a href="#sec:caption-attr">§4.1 <code>caption</code> attribute</a></li>
<li><a href="#sec:table-capts">§4.2 Table-style captions</a></li>
</ul></li>
<li><a href="#sec:第五章-subfigures">第五章 Subfigures</a></li>
<li><a href="#sec:第五章-文献综述">第五章 文献综述</a></li>
<li><a href="#sec:附表一crossref.yaml">附表一：<code>crossref.yaml</code></a></li>
<li><a href="#sec:致谢">致谢</a></li>
<li><a href="#sec:参考文献">参考文献</a></li>
</ul>
</nav>
<h1 id="sec:摘要" class="unnumbered">摘要</h1>
<p>本文用简明的样例，介绍如何使用 Markdown 和 Pandoc 等自动化工具帮你处理数学公式、参考文献引用、图片交叉索引等学术论文写作中常见的棘手问题。</p>
<p><strong>关键词：</strong> pandoc pandoc-crossref markdown</p>
<h1 id="sec:abstract" class="unnumbered">Abstract</h1>
<p>This is a tutorial file for writing a undergraduate thesis using Markdown and <code>pandoc</code>.</p>
<p><strong>Keywords:</strong> pandoc, pandoc-crossref markdown</p>
<h1 id="sec:sec1">第一章 绪论</h1>
<h2 id="sec:pandoc">§1.1 <code>pandoc</code></h2>
<p>Pandoc is a Haskell library for converting from one markup format to another, and a command-line tool that uses this library. It can read Markdown and write Word docx.</p>
<h2 id="sec:pandoc-crossref-filter">§1.2 <code>pandoc-crossref</code> filter</h2>
<p>With this filter<a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a>, you can cross-reference figures (see 图 3.1), display equations (see 公式 3.1), tables (see 表 3.1) and sections (§ 1, 2, 4.1, 4.2)</p>
<p>There is also support for code blocks, for example, 列表 4.1, 4.2.</p>
<p>Subfigures are supported, see 图 5.1, 5.1 (b)</p>
<h2 id="sec:pandoc---reference-doc">§1.3 <code>pandoc --reference-doc</code></h2>
<p>Use the specified file as a style reference in producing a docx file. For best results, the reference docx should be a modified version of a docx file produced using pandoc. The contents of the reference docx are ignored, but its stylesheets and document properties (including margins, page size, header, and footer) are used in the new docx.</p>
<h1 id="sec:sec2">第二章 List Items</h1>
<p>List items may include other lists. In this case the preceding blank line is optional. The nested list must be indented four spaces or one tab:</p>
<ul>
<li>fruits
<ol type="1">
<li>apples
<ul>
<li>macintosh</li>
<li>red delicious</li>
</ul></li>
<li>pears</li>
<li>peaches</li>
</ol></li>
<li>vegetables
<ul>
<li>broccoli</li>
<li>chard</li>
</ul></li>
</ul>
<p>Pandoc also pays attention to the type of list marker used, and to the starting number:</p>
<ol start="9" type="1">
<li>Ninth</li>
<li>Tenth</li>
<li>Eleventh
<ol type="i">
<li>subone</li>
<li>subtwo</li>
<li>subthree</li>
</ol></li>
</ol>
<p>Pandoc supports definition lists, using the syntax of PHP Markdown Extra with some extensions.</p>
<dl>
<dt>Term 1</dt>
<dd>Definition 1
</dd>
<dt>Term 2</dt>
<dd>Definition 2
</dd>
</dl>
<h1 id="sec:sec3">第三章 图、表、公式</h1>
<h2 id="sec:图">§3.1 图</h2>
<p>An image occurring by itself in a paragraph will be rendered as a figure with a caption.</p>
<figure>
<img src="media/image2.jpeg" alt="图 3.1: This is the caption" id="fig:figure0" /><figcaption>图 3.1: This is the caption</figcaption>
</figure>
<p>(source)</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode markdown"><code class="sourceCode markdown"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="al">![This is the caption](media/image2.jpeg)</span>{#fig:figure0}</a></code></pre></div>
<p>If you just want a regular inline image, just make sure it is not the only thing in the paragraph. One way to do this is to insert a nonbreaking space after the image:</p>
<p><img src="media/image2.jpeg" alt="No caption" /> </p>
<p>(source)</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode markdown"><code class="sourceCode markdown"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="al">![No caption](media/image2.jpeg)</span>\ </a></code></pre></div>
<h2 id="sec:表">§3.2 表</h2>
<p>Simple tables can be generated using Markdown.</p>
<div id="tbl:table1">
<table>
<caption><em>表 3.1</em>: Table example</caption>
<thead>
<tr class="header">
<th></th>
<th style="text-align: center;">28nm</th>
<th style="text-align: center;">20nm</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Fab Costs</td>
<td style="text-align: center;">$3B</td>
<td style="text-align: center;">$4B - $7B</td>
</tr>
<tr class="even">
<td>Process R&amp;D</td>
<td style="text-align: center;">$1.2B</td>
<td style="text-align: center;">$2.1B - $3B</td>
</tr>
<tr class="odd">
<td>Mask Costs</td>
<td style="text-align: center;">$2M - $3M</td>
<td style="text-align: center;">$5M - $8M</td>
</tr>
<tr class="even">
<td>Design Costs</td>
<td style="text-align: center;">$50M - $90M</td>
<td style="text-align: center;">$120M - $500M</td>
</tr>
</tbody>
</table>
</div>
<p>(source)</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode markdown"><code class="sourceCode markdown"><a class="sourceLine" id="cb3-1" data-line-number="1">|              |      28nm     |      20nm       |</a>
<a class="sourceLine" id="cb3-2" data-line-number="2">|--------------|:-------------:|:---------------:|</a>
<a class="sourceLine" id="cb3-3" data-line-number="3">| Fab Costs    | \$3B          |  \$4B - \$7B    |</a>
<a class="sourceLine" id="cb3-4" data-line-number="4">| Process R&amp;D  | \$1.2B        | \$2.1B - \$3B   |</a>
<a class="sourceLine" id="cb3-5" data-line-number="5">| Mask Costs   | \$2M - \$3M   | \$5M - \$8M     |</a>
<a class="sourceLine" id="cb3-6" data-line-number="6">| Design Costs | \$50M - \$90M | \$120M - \$500M |</a>
<a class="sourceLine" id="cb3-7" data-line-number="7"></a>
<a class="sourceLine" id="cb3-8" data-line-number="8">: Table example {#tbl:table1}</a></code></pre></div>
<h2 id="sec:公式">§3.3 公式</h2>
<p>Display equations are labelled and numbered:</p>
<p><span id="eq:eqn1"><br /><span class="math display"><em>P</em>(<em>x</em>) = ∑<sub><em>i</em></sub><em>a</em><sub><em>i</em></sub><em>x</em><sup><em>i</em></sup>  (3.1)</span><br /></span></p>
<p>(source)</p>
<pre><code>$$P(x) = \sum_i a_i x^i$$ {#eq:eqn1}</code></pre>
<p>Those can also appear in the middle of paragraph <span class="math inline"><em>x</em><sup>2</sup> = 0</span> like this.</p>
<p>(source)</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode markdown"><code class="sourceCode markdown"><a class="sourceLine" id="cb5-1" data-line-number="1">Those can also appear in the middle of </a>
<a class="sourceLine" id="cb5-2" data-line-number="2">paragraph $x^2 = 0$ like this.</a></code></pre></div>
<h1 id="sec:第四章-code-blocks">第四章 Code blocks</h1>
<p>There are a couple options for code block labels. Those work only if code block id starts with <code>lst:</code>, e.g. <code>{#lst:label}</code></p>
<h2 id="sec:caption-attr">§4.1 <code>caption</code> attribute</h2>
<p><code>caption</code> attribute will be treated as code block caption. If code block has both id and <code>caption</code> attributes, it will be treated as numbered code block.</p>
<div id="lst:captionAttr" class="listing haskell">
<p>列表 4.1: Listing caption A</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode haskell"><code class="sourceCode haskell"><a class="sourceLine" id="cb6-1" data-line-number="1"><span class="ot">main ::</span> <span class="dt">IO</span> ()</a>
<a class="sourceLine" id="cb6-2" data-line-number="2">main <span class="fu">=</span> putStrLn <span class="st">&quot;Hello World!&quot;</span></a></code></pre></div>
</div>
<h2 id="sec:table-capts">§4.2 Table-style captions</h2>
<p>Enabled with <code>codeBlockCaptions</code> metadata option. If code block is immediately adjacent to paragraph, starting with <code>Listing:</code> or <code>:</code>, said paragraph will be treated as code block caption.</p>
<div id="lst:tableCaption" class="listing haskell">
<p>列表 4.2: Listing caption B</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode haskell"><code class="sourceCode haskell"><a class="sourceLine" id="cb7-1" data-line-number="1"><span class="ot">main ::</span> <span class="dt">IO</span> ()</a>
<a class="sourceLine" id="cb7-2" data-line-number="2">main <span class="fu">=</span> putStrLn <span class="st">&quot;Hello World!&quot;</span></a></code></pre></div>
</div>
<h1 id="sec:第五章-subfigures">第五章 Subfigures</h1>
<p>It’s possible to group figures as subfigures:</p>
<div id="fig:subfigures" class="subfigures">
<figure>
<img src="media/image1.jpeg" alt="a" id="fig:subfigureA" /><figcaption>a</figcaption>
</figure>
<figure>
<img src="media/image2.jpeg" alt="b" id="fig:subfigureB" /><figcaption>b</figcaption>
</figure>
<p>图 5.1: Caption of figure. a — subfigure 1 caption, b — subfigure 2 caption</p>
</div>
<p>(source)</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode html"><code class="sourceCode html"><a class="sourceLine" id="cb8-1" data-line-number="1"><span class="kw">&lt;div</span><span class="ot"> id=</span><span class="st">&quot;fig:subfigures&quot;</span><span class="kw">&gt;</span></a>
<a class="sourceLine" id="cb8-2" data-line-number="2">![subfigure 1 caption](media/image1.jpeg){#fig:subfigureA}</a>
<a class="sourceLine" id="cb8-3" data-line-number="3"></a>
<a class="sourceLine" id="cb8-4" data-line-number="4">![subfigure 2 caption](media/image2.jpeg){#fig:subfigureB}</a>
<a class="sourceLine" id="cb8-5" data-line-number="5"></a>
<a class="sourceLine" id="cb8-6" data-line-number="6">Caption of figure</a>
<a class="sourceLine" id="cb8-7" data-line-number="7"><span class="kw">&lt;/div&gt;</span></a></code></pre></div>
<p>To sum up, subfigures are made with a div having a figure id. Contents of said div consist of several paragraphs. All but last paragraphs contain one subfigure each, with captions, images and (optionally) reference attributes. Last paragraph contains figure caption.</p>
<h1 id="sec:第五章-文献综述">第五章 文献综述</h1>
<p>王国成阐述了大数据的特性变迁过程<span class="citation" data-cites="王国成2017从"><sup>[1]</sup></span>。</p>
<p>其他学者讲述了大数据的价值和处理方式<span class="citation" data-cites="于晓龙2014大数据的经济学涵义及价值创造机制 徐计2015基于粒计算的大数据处理"><sup>[2,3]</sup></span>。</p>
<h1 id="sec:附表一crossref.yaml" class="unnumbered">附表一：<code>crossref.yaml</code></h1>
<div class="sourceCode" id="cb9"><pre class="sourceCode yaml"><code class="sourceCode yaml"><a class="sourceLine" id="cb9-1" data-line-number="1"><span class="ot">---</span></a>
<a class="sourceLine" id="cb9-2" data-line-number="2"><span class="fu">cref:</span><span class="at"> False</span></a>
<a class="sourceLine" id="cb9-3" data-line-number="3"><span class="fu">chapters:</span><span class="at"> True</span></a>
<a class="sourceLine" id="cb9-4" data-line-number="4"><span class="fu">chaptersDept:</span><span class="at"> 2</span></a>
<a class="sourceLine" id="cb9-5" data-line-number="5"><span class="fu">codeBlockCaptions:</span><span class="at"> True</span></a>
<a class="sourceLine" id="cb9-6" data-line-number="6"><span class="fu">figureTitle:</span><span class="at"> </span><span class="st">&quot;图 &quot;</span></a>
<a class="sourceLine" id="cb9-7" data-line-number="7"><span class="fu">tableTitle:</span><span class="at"> </span><span class="st">&quot;表 &quot;</span></a>
<a class="sourceLine" id="cb9-8" data-line-number="8"><span class="fu">listingTitle:</span><span class="at"> </span><span class="st">&quot;列表 &quot;</span></a>
<a class="sourceLine" id="cb9-9" data-line-number="9"><span class="fu">tableTemplate:</span><span class="at"> </span><span class="st">&quot;*$$tableTitle$$ $$i$$*$$titleDelim$$ $$t$$&quot;</span></a>
<a class="sourceLine" id="cb9-10" data-line-number="10"><span class="fu">autoSectionLabels:</span><span class="at"> True</span></a>
<a class="sourceLine" id="cb9-11" data-line-number="11"><span class="fu">figPrefix:</span></a>
<a class="sourceLine" id="cb9-12" data-line-number="12">  <span class="kw">-</span> <span class="st">&quot;图&quot;</span></a>
<a class="sourceLine" id="cb9-13" data-line-number="13"><span class="fu">eqnPrefix:</span></a>
<a class="sourceLine" id="cb9-14" data-line-number="14">  <span class="kw">-</span> <span class="st">&quot;公式&quot;</span></a>
<a class="sourceLine" id="cb9-15" data-line-number="15"><span class="st">tblPrefix:</span></a>
<a class="sourceLine" id="cb9-16" data-line-number="16"><span class="st">  - &quot;</span>表<span class="st">&quot;</span></a>
<a class="sourceLine" id="cb9-17" data-line-number="17"><span class="st">lstPrefix:</span></a>
<a class="sourceLine" id="cb9-18" data-line-number="18"><span class="st">  - &quot;</span>列表<span class="st">&quot;</span></a>
<a class="sourceLine" id="cb9-19" data-line-number="19"><span class="st">secPrefix:</span></a>
<a class="sourceLine" id="cb9-20" data-line-number="20"><span class="st">  - &quot;</span>§<span class="st">&quot;</span></a>
<a class="sourceLine" id="cb9-21" data-line-number="21"><span class="st">...</span></a></code></pre></div>
<h1 id="sec:致谢" class="unnumbered">致谢</h1>
<p>thanks everyone</p>
<h1 id="sec:参考文献" class="unnumbered">参考文献</h1>
<div id="refs" class="references">
<div id="ref-王国成2017从">
<p>[1] 王国成. 从3V到5V:大数据助推经济行为的深化研究[J]. 天津社会科学, 2017(2): 94–99.</p>
</div>
<div id="ref-于晓龙2014大数据的经济学涵义及价值创造机制">
<p>[2] 于晓龙, 王金照. 大数据的经济学涵义及价值创造机制[J]. 中国国情国力, 2014(2): 28–30.</p>
</div>
<div id="ref-徐计2015基于粒计算的大数据处理">
<p>[3] 徐计, 王国胤, 于洪. 基于粒计算的大数据处理[J]. 计算机学报, 2015(8): 1497–1517.</p>
</div>
</div>
<section class="footnotes">
<hr />
<ol>
<li id="fn1"><p>This file is generated by the command:</p>
<blockquote>
<p>pandoc -F pandoc-crossref -F pandoc-citeproc –bibliography=reference.bib –csl=chinese-gb7714-2005-numeric.csl –reference-doc=fd_bylw_t.docx –toc demo.md crossref.yaml -o temp.docx</p>
</blockquote>
<a href="#fnref1" class="footnote-back">↩</a></li>
</ol>
</section>
</body>
</html>
